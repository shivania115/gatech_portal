(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){e.exports=a(309)},309:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(32),c=a.n(r),l=(a(310),a(14)),i=a.n(l),s=a(49),u=a(10),m=(a(176),a(26)),h=a(126),d=a(62),f=h.a,g=Object(m.a)(d,["geoPath"]),b=Object(n.createContext)(),p=function(e){var t=e.width,a=e.height,r=e.offsetX,c=e.offsetY,l=e.projection,i=e.projectionConfig,s=Object(m.a)(e,["width","height","offsetX","offsetY","projection","projectionConfig"]),h=i.center||[],d=Object(u.a)(h,2),p=d[0],v=d[1],E=i.rotate||[],y=Object(u.a)(E,3),C=y[0],j=y[1],O=y[2],w=i.parallels||[],N=Object(u.a)(w,2),D=N[0],k=N[1],S=i.scale||null,I=Object(n.useMemo)(function(){return function(e){var t=e.projectionConfig,a=void 0===t?{}:t,n=e.projection,o=void 0===n?"geoEqualEarth":n,r=e.width,c=void 0===r?800:r,l=e.height,i=void 0===l?600:l,s=e.offsetX,u=void 0===s?0:s,m=e.offsetY,h=void 0===m?0:m;if("function"===typeof o)return o;var d=a.scale||null,f=g[o]().translate([c/2+u*d/1e3,i+h*d/1e3]).rotate([82+10/60,-30]).scale(100);return[f.center?"center":null,f.rotate?"rotate":null,f.scale?"scale":null,f.parallels?"parallels":null].forEach(function(e){e&&(f=f[e](a[e]||f[e]()))}),f}({projectionConfig:{center:p||0===p||v||0===v?[p,v]:null,rotate:C||0===C||j||0===j?[C,j,O]:null,parallels:D||0===D||k||0===k?[D,k]:null,scale:S},projection:l,width:t,height:a,offsetX:r,offsetY:c})},[t,a,l,p,v,C,j,O,D,k,S,r,c]),M=Object(n.useCallback)(I,[I]),A=Object(n.useMemo)(function(){return{width:t,height:a,projection:M,path:f().projection(M)}},[t,a,M]);return o.a.createElement(b.Provider,Object.assign({value:A},s))},v=a(33),E=a(139);function y(e,t){if(Array.isArray(e))return t?t(e):e;var a=Object(E.a)(e,e.objects[Object.keys(e.objects)[0]]).features;return console.log(e.objects[Object.keys(e.objects)[0]]),t?t(a):a}function C(e){var t=e.geography,a=e.parseGeographies,o=Object(n.useContext)(b).path,r=Object(n.useState)(),c=Object(u.a)(r,2),l=c[0],i=c[1];return Object(n.useEffect)(function(){var e;"undefined"!==typeof window&&("string"===typeof t?(e=t,fetch(e).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).catch(function(e){console.log("There was a problem when fetching the data: ",e)})).then(function(e){e&&i(y(e,a))}):i(y(t,a)))},[t,a]),{geographies:Object(n.useMemo)(function(){return function(e,t){return e?e.map(function(e,a){return Object(v.a)({},e,{rsmKey:"geo-".concat(a),svgPath:t(e)})}):[]}(l,o)},[l,o])}}var j=function(e){var t=e.geography,a=e.children,r=e.parseGeographies,c=e.className,l=void 0===c?"":c,i=Object(m.a)(e,["geography","children","parseGeographies","className"]),s=Object(n.useContext)(b),u=s.path,h=s.projection,d=C({geography:t,parseGeographies:r}).geographies;return o.a.createElement("g",Object.assign({className:"rsm-geographies ".concat(l),height:100},i),d&&d.length>0&&a({geographies:d,path:u,projection:h}))},O=Object(n.memo)(function(e){var t=e.geography,a=e.onMouseEnter,r=e.onMouseLeave,c=e.onMouseDown,l=e.onMouseUp,i=e.onFocus,s=e.onBlur,h=e.style,d=void 0===h?{}:h,f=e.className,g=void 0===f?"":f,b=Object(m.a)(e,["geography","onMouseEnter","onMouseLeave","onMouseDown","onMouseUp","onFocus","onBlur","style","className"]),p=Object(n.useState)(!1),v=Object(u.a)(p,2),E=v[0],y=v[1],C=Object(n.useState)(!1),j=Object(u.a)(C,2),O=j[0],w=j[1];return o.a.createElement("path",Object.assign({tabIndex:"0",className:"rsm-geography ".concat(g),d:t.svgPath,onMouseEnter:function(e){w(!0),a&&a(e)},onMouseLeave:function(e){w(!1),E&&y(!1),r&&r(e)},onFocus:function(e){w(!0),i&&i(e)},onBlur:function(e){w(!1),E&&y(!1),s&&s(e)},onMouseDown:function(e){y(!0),c&&c(e)},onMouseUp:function(e){y(!1),l&&l(e)},style:d[E||O?E?"pressed":"hover":"default"]},b))}),w=function(e){var t=e.width,a=void 0===t?800:t,n=e.height,r=void 0===n?600:n,c=e.offsetX,l=void 0===c?0:c,i=e.offsetY,s=void 0===i?0:i,u=e.projection,h=void 0===u?"geoEqualEarth":u,d=e.projectionConfig,f=void 0===d?{}:d,g=e.className,b=void 0===g?"":g,v=Object(m.a)(e,["width","height","offsetX","offsetY","projection","projectionConfig","className"]);return o.a.createElement(p,{width:a,height:r,offsetX:l,offsetY:s,projection:h,projectionConfig:f},o.a.createElement("svg",Object.assign({width:a,height:r,className:"rsm-svg ".concat(b)},v)))},N=a(319),D=a(29),k=D.c.hasAppClient("test-owzgf")?D.c.getAppClient("test-owzgf"):D.c.initializeAppClient("test-owzgf"),S=k.getServiceClient(D.b.factory,"mongodb-atlas").db("healthequity").collection("gatech"),I=a(21),M=a.n(I),A=o.a.createContext();function x(){var e=o.a.useContext(A);if(!e)throw new Error("useGADM must be used within a GADMProvider");return e}function L(e){var t=o.a.useState({selectedTable:{tableName:"Demographic Composition",qryName:"Demographic Composition"},selectedVariable:{varName:"65 years or older",printName:"Select a Variable to View ->"},selectedCounty:{NAME:"Fulton"},fetchedData:[]}),a=Object(u.a)(t,2),n=a[0],r=a[1],c=function(e){r(Object(v.a)({},n,e))},l=o.a.useMemo(function(){return{selectedTable:n.selectedTable,selectedVariable:n.selectedVariable,selectedCounty:n.selectedCounty,fetchedData:n.fetchedData,actions:{handlePageStateChange:c}}},[n]);return o.a.createElement(A.Provider,{value:l},e.children)}var P="https://raw.githubusercontent.com/deldersveld/topojson/master/countries/us-states/GA-13-georgia-counties.json";function T(e){var t=Object(n.useState)(0),a=Object(u.a)(t,2),r=a[0],c=a[1],l=x(),i=l.selectedVariable,s=l.selectedCounty,m=l.fetchedData,h=l.actions.handlePageStateChange,d=["#edcfa9","#e89f71","#d57149","#aa4a30"],f=Object(n.useState)(0),g=Object(u.a)(f,2),b=g[0],p=g[1];return Object(n.useEffect)(function(){var e=M.a.map(m[i.varName],"value"),t=Object(N.a)().domain(e).range(d),a={};M.a.forEach(m[i.varName],function(e){a[e.county]=t(e.value)}),p(a)},[i]),o.a.createElement("div",null,o.a.createElement(w,{projection:"geoTransverseMercator","data-tip":"",width:760,height:560,strokeWidth:.5,stroke:"black",projectionConfig:{scale:6e3}},o.a.createElement(j,{geography:P},function(e){var t=e.geographies;return o.a.createElement("svg",null,t.map(function(e){return o.a.createElement(O,{key:e.rsmKey,geography:e,onClick:function(){h({selectedCounty:e.properties})},onMouseEnter:function(){c(e.properties.GEOID)},onMouseLeave:function(){c(0)},fill:r===e.properties.GEOID?"#89beb3":0===Object.keys(b).length?"white":b[e.properties.NAME+" County"],strokeWidth:s.GEOID===e.properties.GEOID?3:.5,stroke:s.GEOID===e.properties.GEOID?"white":"black"})}))})))}var R=a(320),q=a(323),F=a(324),G=a(316),H=a(321),W=a(317),V=a(322);a(308);function U(e){var t=e.categories,a=Object(n.useState)([]),r=Object(u.a)(a,2),c=r[0],l=r[1],m=Object(n.useState)([]),h=Object(u.a)(m,2),d=h[0],f=h[1],g=x(),b=(g.selectedVariable,g.selectedCounty),p=g.selectedTable,v=(g.fetchedData,g.actions.handlePageStateChange),E=function(){var e=Object(s.a)(i.a.mark(function e(){var t,a,n,o,r,c,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={subgroup:p.qryName},e.next=3,S.find(t,{projection:{subsubgroup:1,value:1,county:1}}).toArray();case 3:for(r in a=e.sent,n=M.a.sortBy(M.a.filter(a,["county",b.NAME+" County"]),["subsubgroup"]),l(n),o=M.a.groupBy(a,"subsubgroup"),v({fetchedData:o}),c=[],o)s=M.a.meanBy(M.a.reject(o[r],["value","N/A"]),function(e){return e.value}),c.push(s.toFixed(2));f(c);case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(function(){E()},[b,p]);var y=c.map(function(e,a){var n;return n="N/A"!=e.value?e.value.toFixed(2):e.value,o.a.createElement(R.a.Row,{key:a,onClick:function(){v({selectedVariable:{varName:e.subsubgroup,printName:t[a]}})}},o.a.createElement(R.a.Cell,null,e.subsubgroup),o.a.createElement(R.a.Cell,null,n),o.a.createElement(R.a.Cell,null,d[a]))});return o.a.createElement(R.a.Body,null,y)}function z(){var e=x(),t=e.selectedTable,a=e.actions.handlePageStateChange;return o.a.createElement(V.a,{pointing:!0,vertical:!0},o.a.createElement(V.a.Item,{name:"Demographic Composition",active:"Demographic Composition"===t.tableName,onClick:function(){a({selectedTable:{tableName:"Demographic Composition",qryName:"Demographic Composition"}})}}),o.a.createElement(V.a.Item,{name:"Cardiometabolic Disease Morbidity",active:"Cardiometabolic Disease Morbidity"===t.tableName,onClick:function(){a({selectedTable:{tableName:"Cardiometabolic Disease Morbidity",qryName:"Cardiometabolic disease morbidity"}})}}),o.a.createElement(V.a.Item,{name:"Clinical Events",active:"Clinical Events"===t.tableName,onClick:function(){a({selectedTable:{tableName:"Clinical Events",qryName:"Clinical events"}})}}),o.a.createElement(V.a.Item,{name:"Lifestyle Related Risk Factors",active:"Lifestyle Related Risk Factors"===t.tableName,onClick:function(){a({selectedTable:{tableName:"Lifestyle Related Risk Factors",qryName:"Lifestyle Related Risk Factors"}})}}),o.a.createElement(V.a.Item,{name:"Health Care",active:"Healthcare"===t.tableName,onClick:function(){a({selectedTable:{tableName:"Healthcare",qryName:"Healthcare"}})}}),o.a.createElement(V.a.Item,{name:"Socioeconomic Factors",active:"Socioeconomic Factors"===t.tableName,onClick:function(){a({selectedTable:{tableName:"Socioeconomic Factors",qryName:"Socioeconomic Factors"}})}}))}function B(){var e=x(),t=e.selectedTable,a=(e.selectedVariable,e.selectedCounty),r=(e.actions.handlePageStateChange,Object(n.useState)([])),c=Object(u.a)(r,2);c[0],c[1];return o.a.createElement(q.a,null,o.a.createElement(q.a.Row,null,o.a.createElement(q.a.Column,null,o.a.createElement(F.a,{as:"h3",style:{fontWeight:300}},"Statistics of ",a.NAME,o.a.createElement(F.a.Subheader,{style:{fontWeight:300}},"The tables below show diabetes-related health determinants of the ",a.NAME," county.")))),o.a.createElement(q.a.Row,{columns:2},o.a.createElement(q.a.Column,{textAlign:"left",style:{paddingTop:"2em"}},o.a.createElement(z,null)),o.a.createElement(q.a.Column,{textAlign:"left",style:{paddingTop:"2em"}},o.a.createElement(F.a,{as:"h4",style:{fontWeight:300}},t.tableName),o.a.createElement(R.a,{selectable:!0,basic:"very",size:"small"},o.a.createElement(R.a.Header,null,o.a.createElement(R.a.Row,null,o.a.createElement(R.a.HeaderCell,{style:{borderTop:0}},"Variable"),o.a.createElement(R.a.HeaderCell,{style:{borderTop:0}},"County Stat"),o.a.createElement(R.a.HeaderCell,{style:{borderTop:0}},"State Stat"))),o.a.createElement(U,{categories:"Demographic Composition"===t.tableName?["% of 65 years or older","% of African American","% of Asian","% of Foreign born","% of Hispanic","Median age","Total Population (thousands)","% of Women"]:"Cardiometabolic disease morbidity"===t.qryName?["CHD Prevalence","Diabetes Prevalence","Hypertension Prevalence","Newly diagnosed diabetes","Obesity Prevalence"]:"Clinical events"===t.qryName?["CVD Deaths","CVD Hospitalizations","Diabetes Deaths","Diabetes Hospitalizations","Kidney Hospitalizations"]:"Lifestyle Related Risk Factors"===t.qryName?["Alcohol Consumption","Physical Inactivity","Sleep","Smoking"]:"Healthcare"===t.qryName?["% Diabetes in Medicaid Population","Cardiologists","Endocrinologists","Primary Care Doctors","% of Uninsured"]:"Socioeconomic Factors"===t.qryName?["Graduates High School in 4 Years","In Poverty","Income Inequality","Median Income (2015)","Unemployed"]:void 0})))))}function Y(){var e=x(),t=e.selectedVariable;e.selectedCounty,e.actions.handlePageStateChange;return o.a.createElement(q.a,null,o.a.createElement(q.a.Row,null,o.a.createElement(q.a.Column,null,o.a.createElement(F.a,{as:"h3",style:{fontWeight:300}},t.printName,o.a.createElement(F.a.Subheader,{style:{fontWeight:300}},"The color on the map shows the ",t.printName," of the Georgia Counties.")))),o.a.createElement(q.a.Row,null,o.a.createElement(q.a.Column,null,o.a.createElement(T,null))))}function X(){return o.a.createElement(L,null,o.a.createElement(G.a,null,o.a.createElement(q.a,{style:{paddingTop:"2em"}},o.a.createElement(q.a.Row,{columns:1},o.a.createElement(q.a.Column,{textAlign:"center"},o.a.createElement(F.a,{as:"h1",style:{fontWeight:300}},"Georgia Diabetes Data Portal",o.a.createElement(F.a.Subheader,{style:{fontWeight:300}},"Interactive Dashboard of Diabetes-related Health Determinants")),o.a.createElement(F.a,{as:"h4",style:{fontWeight:300}},"A Quick User Guide"),o.a.createElement(H.a,{bulleted:!0,style:{fontWeight:300},size:"mini"},o.a.createElement(H.a.Item,null,"Click on a county on the map located ",o.a.createElement("i",null,"(on the left)")," ",o.a.createElement("br",null),"to see its full statistics on the table ",o.a.createElement("i",null,"(on the right)"),"."),o.a.createElement(H.a.Item,null,"Click on a variable on the table located ",o.a.createElement("i",null,"(on the right)")," ",o.a.createElement("br",null),"to see the county-level distribution on the map ",o.a.createElement("i",null,"(on the left)"),".")))),o.a.createElement(W.a,null),o.a.createElement(q.a.Row,{columns:2},o.a.createElement(q.a.Column,{width:8,textAlign:"center"},o.a.createElement(Y,null)),o.a.createElement(q.a.Column,{width:8,textAlign:"center"},o.a.createElement(B,null))))))}function K(){var e=new D.a;return k.auth.loginWithCredential(e)}function J(){return k.auth.isLoggedIn?k.auth.user:null}function Q(){var e=J();return k.auth.logoutUserWithId(e.id)}var Z=o.a.createContext();function $(e){var t=o.a.useState({isLoggedIn:k.auth.isLoggedIn,currentUser:J()}),a=Object(u.a)(t,2),n=a[0],r=a[1],c=function(){var e=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isLoggedIn){e.next=6;break}return e.next=4,K();case 4:t=e.sent,r(Object(v.a)({},n,{isLoggedIn:!0,currentUser:t}));case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(s.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isLoggedIn){e.next=7;break}return e.next=4,Q();case 4:r(Object(v.a)({},n,{isLoggedIn:!1,currentUser:null})),e.next=8;break;case 7:console.log("can't handleLogout when no user is logged in");case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),m=o.a.useMemo(function(){return{isLoggedIn:n.isLoggedIn,currentUser:n.currentUser,actions:{handleAnonymousLogin:c,handleLogout:l}}},[n.isLoggedIn]);return o.a.createElement(Z.Provider,{value:m},e.children)}a(306);function _(){var e=function(){var e=o.a.useContext(Z);if(!e)throw new Error("useStitchAuth must be used within a StitchAuthProvider");return e}(),t=(e.isLoggedIn,e.actions),a=(t.handleLogout,t.handleAnonymousLogin);return Object(n.useEffect)(function(){a()},[]),o.a.createElement(X,null)}a(307);var ee=document.getElementById("root");c.a.render(o.a.createElement(function(){return o.a.createElement($,null,o.a.createElement(_,null))},null),ee)}},[[169,1,2]]]);
//# sourceMappingURL=main.026b88c2.chunk.js.map